{
    "listen": "127.0.0.1:5200",
    "secret": "multipass",
    "minNode": 0,
    "maxNode": 5,
    "nodePrice": 0.0,
    "podPrice": 0.0,
    "image": "bionic",
    "kubeconfig": "/etc/kubernetes/config",
    "auto-provision": true,
    "optionals": {
        "pricing": false,
        "getAvailableMachineTypes": false,
        "newNodeGroup": false,
        "templateNodeInfo": false,
        "createNodeGroup": false,
        "deleteNodeGroup": false
    },
    "kubeadm": {
        "address": "10.196.85.147:6443",
        "token": "g93qcn.v0rpy9pkrv2war5f",
        "ca": "sha256:db1bcef50ebac529f180bceae436c61ea6cf1f46c38f507c9e583b32a83c2c2e",
        "extras-args": [
            "--ignore-preflight-errors=All"
        ]
    },
    "machines": {
        "tiny": {
            "memsize": 2048,
            "vcpus": 2,
            "disksize": 5120
        },
        "medium": {
            "memsize": 4096,
            "vcpus": 2,
            "disksize": 10240
        },
        "large": {
            "memsize": 8192,
            "vcpus": 4,
            "disksize": 20480
        },
        "extra-large": {
            "memsize": 16384,
            "vcpus": 8,
            "disksize": 51200
        }
    },
    "cloud-init": {
        "package_update": true,
        "package_upgrade": true,
        "runcmd": [
            "export CNI_VERSION=v0.7.1",
            "export RELEASE=v1.12.3",
            "curl https://get.docker.com | bash",
            "mkdir -p /opt/cni/bin",
            "curl -L https://github.com/containernetworking/plugins/releases/download/${CNI_VERSION}/cni-plugins-amd64-${CNI_VERSION}.tgz | tar -C /opt/cni/bin -xz",
            "mkdir -p /usr/local/bin",
            "cd /usr/local/bin ; curl -L --remote-name-all https://storage.googleapis.com/kubernetes-release/release/${RELEASE}/bin/linux/amd64/{kubeadm,kubelet,kubectl}",
            "chmod +x /usr/local/bin/kube*",
            "echo \"KUBELET_EXTRA_ARGS='--fail-swap-on=false --read-only-port=10255 --feature-gates=VolumeSubpathEnvExpansion=true'\" > /etc/default/kubelet",
            "curl -sSL \"https://raw.githubusercontent.com/kubernetes/kubernetes/${RELEASE}/build/debs/kubelet.service\" | sed 's:/usr/bin:/usr/local/bin:g' > /etc/systemd/system/kubelet.service",
            "mkdir -p /etc/systemd/system/kubelet.service.d",
            "curl -sSL \"https://raw.githubusercontent.com/kubernetes/kubernetes/${RELEASE}/build/debs/10-kubeadm.conf\" | sed 's:/usr/bin:/usr/local/bin:g' > /etc/systemd/system/kubelet.service.d/10-kubeadm.conf",
            "systemctl enable kubelet && systemctl restart kubelet",
            "echo 'export PATH=/opt/cni/bin:$PATH' >> /etc/profile.d/apps-bin-path.sh",
            "kubeadm config images pull",
            "apt autoremove"
        ],
        "ssh_authorized_keys": [
            "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDhniyEBZs0t7aQZhn8gWfYrFacYJKQQx9x6pckZvMJIceLsQPB/J9CbqARtcCKZkK47yDzlH/zZNwt/AJvOawKZp6LDIWMOMF6TGicVhA+0RD3dOuqKRT0uJmaSo3Cz0GAaanTJXkhsEDZzaPkyLWXYaf6LxGAuMKCxv69j4H9ffGhRxNZ+62bs7DY+SH12hlcObZaz9GRydvEI/PUDghKJ4h1QKgvCKM1Mre1vQ2DHOuSifQC0Qbh0zK/JiJpHyBgFWRvKz72e2ya6+RW0ZuDGa6Qc3Zt8FIfH6eoiX+WOG7BUsXRN3n5gcWSXyYA9kxzBlNdMyYtD0fRlyb3+HgL"
        ],
        "users": [
            {
                "name": "kubernetes",
                "primary_group": "kubernetes",
                "groups": [
                    "adm",
                    "users"
                ],
                "lock_passwd": false,
                "passwd": "a9c81dff-3e23-43cf-b755-67c940e4cbbc",
                "sudo": "ALL=(ALL) NOPASSWD:ALL",
                "shell": "/bin/bash",
                "ssh_authorized_keys": [
                    "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDhniyEBZs0t7aQZhn8gWfYrFacYJKQQx9x6pckZvMJIceLsQPB/J9CbqARtcCKZkK47yDzlH/zZNwt/AJvOawKZp6LDIWMOMF6TGicVhA+0RD3dOuqKRT0uJmaSo3Cz0GAaanTJXkhsEDZzaPkyLWXYaf6LxGAuMKCxv69j4H9ffGhRxNZ+62bs7DY+SH12hlcObZaz9GRydvEI/PUDghKJ4h1QKgvCKM1Mre1vQ2DHOuSifQC0Qbh0zK/JiJpHyBgFWRvKz72e2ya6+RW0ZuDGa6Qc3Zt8FIfH6eoiX+WOG7BUsXRN3n5gcWSXyYA9kxzBlNdMyYtD0fRlyb3+HgL"
                ]
            }
        ],
        "group": [
            "kubernetes"
        ],
        "power_state": {
            "mode": "reboot",
            "message": "Reboot VM due upgrade",
            "condition": true
        }
    },
    "mount-point": {
        "~/Vagrant/data": "/data"
    }
}